## 幻读

- 幻读：一个事务在前后两次查询同一个范围的时候，后一次查询看到了前一次查询没有看到的行
- 幻读在“当前读”隔离级别才会出现
- 幻读仅专指“新插入的行”
- 产生幻读的原因：行锁只能锁住行，但是新插入记录这个动作，要更新的是记录之间的“间隙”

### 幻读的问题

1. 数据一致性
1. 语义

### 解决幻读

使用间隙锁（Gap Locked）

间隙锁：所得是两个值之间的空隙

间隙：每条更新语句之间的间隔

间隙锁的引入，可能会导致同样的语句锁住更大的范围，这其实是影响了并发度的

间隙锁在可重复读隔离级别下才有效
