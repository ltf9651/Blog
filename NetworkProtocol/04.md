## UDP

### TCP 和 UDP 区别

 - TCP 是面向连接的，UDP 是面向无连接的

 - 建立连接：是为了在客户端和服务端维护连接，而建立一定的数据结构来维护双方交互的状态，用这样的数据结构来保证所谓的面向连接的特性

 - TCP 提供可靠交付。通过 TCP 连接传输的数据，无差错、不丢失、不重复、并且按序到达

 - IP 包是没有任何可靠性保证的，一旦发出去，就无法控制。UDP 继承了 IP 包的特性，不保证不丢失，不保证按顺序到达

 - TCP 是面向字节流的，发送的时候发的是一个流，没头没尾

 - UDP 继承了 IP 的特性，基于数据报的，一个一个地发，一个一个地收

 - TCP 是可以有拥塞控制的。它意识到包丢弃了或者网络的环境不好了，就会根据情况调整自己的行为，看看是不是发快了，要不要发慢点

 - UDP 就不会，应用让我发，我就发，管它洪水滔天

### UDP 结构

只包含源端口号、目的端口号

### UDP 适用场景

- 需要资源少，在网络情况比较好的内网（DHCP 就是基于 UDP 协议）
- 对于丢包不敏感的应用
- 不需要一对一沟通，建立连接，而是可以广播的应用
- 需要快速处理，延迟低，可以容忍少数丢好但是要求即使网络拥堵也不退缩的时候

在实时对战游戏中，如果使用 TCP 的时候出现一个数据包丢失，所有事情都需要停下来等待这个数据包重发。通常采用自定义的可靠 UDP 协议，自定义重传策略，把丢包产生的延迟降低，尽量减少网络问题对游戏造成的影响
