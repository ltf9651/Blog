## 高可扩展性

### 难点

1. 集群系统中容，MySQL 等存储服务是有状态的，在增加或减少机器时会涉及大量的数据迁移，难以扩展
2. 系统瓶颈点多

### 设计思路

#### 拆分

- 存储层拆分

  将庞杂的系统拆分成独立、单一职责的系统，分别依赖各自的服务器、负载、数据库

  当数据库按照业务和数据维度拆分之后，尽量不要使用事务。因为当一个事务中同时更新不同的数据库时，需要使用二阶段提交，来协调所有数据库要么全部更新成功，要么全部更新失败。这个协调的成本会随着资源的扩展不断升高，最终达到无法承受的程度

- 业务层拆分

  复杂业务拆分成单独的业余池，每个业务依赖独立的数据库资源

  业务拆分为核心和非核心业务池，优先保证核心池的性能
